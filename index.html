<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #667eea;
            --primary-dark: #5a67d8;
            --bg-light: #f7fafc;
            --bg-white: #ffffff;
            --text-dark: #2d3748;
            --text-light: #718096;
            --border-color: #e2e8f0;
            --user-bubble: #667eea;
            --bot-bubble: #f7fafc;
            --shadow: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
        }

        [data-theme="dark"] {
            --bg-light: #1a202c;
            --bg-white: #2d3748;
            --text-dark: #f7fafc;
            --text-light: #a0aec0;
            --border-color: #4a5568;
            --bot-bubble: #4a5568;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            height: 100vh;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: var(--bg-white);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: var(--shadow);
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .logo {
            width: 32px;
            height: 32px;
            fill: var(--primary-color);
        }

        .navbar-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .theme-toggle {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background-color 0.2s;
        }

        .theme-toggle:hover {
            background-color: var(--bg-light);
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-dark);
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            margin-top: 60px;
            margin-bottom: 60px;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--bg-white);
            border-right: 1px solid var(--border-color);
            transition: transform 0.3s ease;
            overflow-y: auto;
        }

        .sidebar.collapsed {
            transform: translateX(-100%);
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .sidebar-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .chat-list {
            padding: 10px 0;
        }

        .message-status {
            font-size: 0.7rem;
            margin-top: 2px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .message.user .message-status {
            justify-content: flex-end;
            color: rgba(255,255,255,0.7);
        }

        .message.bot .message-status {
            color: var(--text-light);
        }

        .status-icon {
            width: 12px;
            height: 12px;
            fill: currentColor;
        }

        .chat-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .chat-item:hover {
            background-color: var(--bg-light);
        }

        .chat-item.active {
            background-color: var(--primary-color);
            color: white;
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            margin-right: 12px;
        }

        .chat-info h4 {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .chat-info p {
            font-size: 0.8rem;
            color: var(--text-light);
            opacity: 0.8;
        }

        /* Chat Area */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-light);
        }

        .chat-header {
            background: var(--bg-white);
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
        }

        .chat-header-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            margin-right: 15px;
        }

        .chat-header-info h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .chat-header-info p {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            scroll-behavior: smooth;
        }

        .message {
            display: flex;
            margin-bottom: 15px;
            opacity: 0;
            transform: translateY(20px);
            animation: messageSlideIn 0.3s ease forwards;
        }

        @keyframes messageSlideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
            word-wrap: break-word;
        }

        .message.user .message-bubble {
            background: var(--user-bubble);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.bot .message-bubble {
            background: var(--bot-bubble);
            color: var(--text-dark);
            border-bottom-left-radius: 4px;
            border: 1px solid var(--border-color);
        }

        .message-time {
            font-size: 0.75rem;
            opacity: 0.7;
            margin-top: 4px;
            text-align: right;
        }

        .message.user .message-time {
            color: rgba(255,255,255,0.8);
        }

        .message.bot .message-time {
            color: var(--text-light);
            text-align: left;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            margin-bottom: 15px;
        }

        .typing-indicator .message-bubble {
            background: var(--bot-bubble);
            border: 1px solid var(--border-color);
            padding: 12px 16px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-light);
            animation: typingDot 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingDot {
            0%, 60%, 100% { opacity: 0.3; }
            30% { opacity: 1; }
        }

        /* Chat Input */
        .chat-input {
            background: var(--bg-white);
            border-top: 1px solid var(--border-color);
            padding: 15px 20px;
            display: flex;
            align-items: flex-end;
            gap: 12px;
        }

        .input-container {
            flex: 1;
            position: relative;
        }

        .chat-input textarea {
            width: 100%;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 10px 45px 10px 15px;
            font-family: inherit;
            font-size: 0.9rem;
            resize: none;
            outline: none;
            background: var(--bg-light);
            color: var(--text-dark);
            min-height: 40px;
            max-height: 120px;
            transition: border-color 0.2s;
        }

        .chat-input textarea:focus {
            border-color: var(--primary-color);
        }

        .send-button {
            position: absolute;
            right: 8px;
            bottom: 8px;
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .send-button:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Right Panel */
        .right-panel {
            width: 280px;
            background: var(--bg-white);
            border-left: 1px solid var(--border-color);
        }

        .panel-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .panel-title {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .panel-content {
            padding: 20px;
        }

        .info-item {
            margin-bottom: 15px;
        }

        .info-label {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Footer */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: var(--bg-white);
            border-top: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .footer-text {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }

            .sidebar {
                position: fixed;
                top: 60px;
                left: 0;
                height: calc(100vh - 120px);
                z-index: 999;
                box-shadow: var(--shadow-lg);
            }

            .right-panel {
                display: none;
            }

            .chat-messages {
                padding: 15px;
            }

            .message-bubble {
                max-width: 85%;
            }

            .chat-input {
                padding: 12px 15px;
            }

            .navbar {
                padding: 0 15px;
            }
        }

        /* Scrollbar Styles */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-light);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-light);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Navbar -->
        <nav class="navbar">
            <div class="navbar-brand">
                <svg class="logo" viewBox="0 0 24 24">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                </svg>
                ChatApp
            </div>
            <div class="navbar-actions">
                <button class="theme-toggle" id="themeToggle">üåô</button>
                <button class="menu-toggle" id="menuToggle">‚ò∞</button>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <div class="sidebar-title">Recent Chats</div>
                </div>
                <div class="chat-list">
                    <div class="chat-item active" data-chat="ai">
                        <div class="chat-avatar">AI</div>
                        <div class="chat-info">
                            <h4>AI Assistant</h4>
                            <p>Always here to help you</p>
                        </div>
                    </div>
                    <div class="chat-item" data-chat="js">
                        <div class="chat-avatar">JS</div>
                        <div class="chat-info">
                            <h4>JavaScript Bot</h4>
                            <p>Ready for coding questions</p>
                        </div>
                    </div>
                    <div class="chat-item" data-chat="design">
                        <div class="chat-avatar">WD</div>
                        <div class="chat-info">
                            <h4>Web Design Bot</h4>
                            <p>UI/UX discussions</p>
                        </div>
                    </div>
                    <div class="chat-item" data-chat="support">
                        <div class="chat-avatar">SP</div>
                        <div class="chat-info">
                            <h4>Support Team</h4>
                            <p>Technical assistance</p>
                        </div>
                    </div>
                    <div class="chat-item" data-chat="creative">
                        <div class="chat-avatar">CR</div>
                        <div class="chat-info">
                            <h4>Creative Bot</h4>
                            <p>Ideas and inspiration</p>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Chat Container -->
            <main class="chat-container">
                <div class="chat-header">
                    <div class="chat-header-avatar" id="currentChatAvatar">AI</div>
                    <div class="chat-header-info">
                        <h3 id="currentChatName">AI Assistant</h3>
                        <p id="currentChatStatus">Online ‚Ä¢ Always ready to help</p>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="message bot">
                        <div class="message-bubble">
                            Hello! I'm your AI assistant. How can I help you today?
                            <div class="message-time">Just now</div>
                            <div class="message-status">
                                <svg class="status-icon" viewBox="0 0 24 24">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                </svg>
                                Delivered
                            </div>
                        </div>
                    </div>
                </div>

                <div class="typing-indicator" id="typingIndicator">
                    <div class="message-bubble">
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>

                <div class="chat-input">
                    <div class="input-container">
                        <textarea 
                            id="messageInput" 
                            placeholder="Type your message..." 
                            rows="1"
                        ></textarea>
                        <button class="send-button" id="sendButton">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </main>

            <!-- Right Panel -->
            <aside class="right-panel">
                <div class="panel-header">
                    <div class="panel-title">Chat Info</div>
                </div>
                <div class="panel-content">
                    <div class="info-item">
                        <div class="info-label">Status</div>
                        <div class="info-value">Online</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Response Time</div>
                        <div class="info-value">Instant</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Messages Today</div>
                        <div class="info-value" id="messageCount">1</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Theme</div>
                        <div class="info-value" id="currentTheme">Light</div>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-text">¬© 2025 ChatApp - Built with ‚ù§Ô∏è</div>
        </footer>
    </div>

    <script>
        class ChatApp {
            constructor() {
                this.messageCount = 1;
                this.isDarkMode = false;
                this.currentChat = 'ai';
                this.chatData = {
                    ai: {
                        name: 'AI Assistant',
                        avatar: 'AI',
                        status: 'Online ‚Ä¢ Always ready to help',
                        responses: [
                            "That's interesting! Tell me more.",
                            "I understand. How can I help you with that?",
                            "Great question! Let me think about that.",
                            "I'm here to assist you with anything you need.",
                            "That sounds like a good plan. What's your next step?",
                            "I see what you mean. Have you considered other options?",
                            "Excellent point! I hadn't thought of it that way.",
                            "Thanks for sharing that with me. How do you feel about it?"
                        ]
                    },
                    js: {
                        name: 'JavaScript Bot',
                        avatar: 'JS',
                        status: 'Online ‚Ä¢ Ready for coding questions',
                        responses: [
                            "Let's solve this JavaScript problem together!",
                            "That's a common JS issue. Here's what I suggest...",
                            "Have you tried using async/await for that?",
                            "Consider using array methods like map() or filter().",
                            "That sounds like a great use case for closures!",
                            "ES6 features can make that code much cleaner.",
                            "Don't forget to handle error cases in your code.",
                            "Performance optimization is key in JavaScript!"
                        ]
                    },
                    design: {
                        name: 'Web Design Bot',
                        avatar: 'WD',
                        status: 'Online ‚Ä¢ Creative and ready',
                        responses: [
                            "Great design question! Let's explore some ideas.",
                            "Consider the user experience first in your design.",
                            "Color psychology plays a big role in UI design.",
                            "Mobile-first approach is always recommended.",
                            "Whitespace is just as important as content!",
                            "Accessibility should be a priority in every design.",
                            "Typography can make or break your design.",
                            "Let's think about the visual hierarchy here."
                        ]
                    },
                    support: {
                        name: 'Support Team',
                        avatar: 'SP',
                        status: 'Online ‚Ä¢ Here to help',
                        responses: [
                            "I'm here to help resolve your issue quickly.",
                            "Let me guide you through the troubleshooting steps.",
                            "Have you tried clearing your browser cache?",
                            "Can you provide more details about the problem?",
                            "I'll escalate this to our technical team if needed.",
                            "Your feedback helps us improve our service.",
                            "Let's work together to find a solution.",
                            "Is there anything else I can assist you with?"
                        ]
                    },
                    creative: {
                        name: 'Creative Bot',
                        avatar: 'CR',
                        status: 'Online ‚Ä¢ Bursting with ideas',
                        responses: [
                            "What an exciting creative challenge!",
                            "Let's brainstorm some innovative ideas together.",
                            "Creativity flows when we think outside the box.",
                            "Every great project starts with a spark of inspiration.",
                            "Don't be afraid to experiment with bold concepts.",
                            "Sometimes the best ideas come from unexpected places.",
                            "Art and technology can create amazing experiences.",
                            "Your unique perspective is what makes creativity special."
                        ]
                    }
                };
                
                this.initializeElements();
                this.bindEvents();
                this.autoResizeTextarea();
                this.setupChatSelection();
            }

            initializeElements() {
                this.messageInput = document.getElementById('messageInput');
                this.sendButton = document.getElementById('sendButton');
                this.chatMessages = document.getElementById('chatMessages');
                this.typingIndicator = document.getElementById('typingIndicator');
                this.themeToggle = document.getElementById('themeToggle');
                this.menuToggle = document.getElementById('menuToggle');
                this.sidebar = document.getElementById('sidebar');
                this.messageCountEl = document.getElementById('messageCount');
                this.currentThemeEl = document.getElementById('currentTheme');
                this.currentChatAvatar = document.getElementById('currentChatAvatar');
                this.currentChatName = document.getElementById('currentChatName');
                this.currentChatStatus = document.getElementById('currentChatStatus');
                this.chatItems = document.querySelectorAll('.chat-item');
            }

            bindEvents() {
                this.sendButton.addEventListener('click', () => this.sendMessage());
                this.messageInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });
                
                this.messageInput.addEventListener('input', () => this.autoResizeTextarea());
                this.themeToggle.addEventListener('click', () => this.toggleTheme());
                this.menuToggle.addEventListener('click', () => this.toggleSidebar());
                
                // Close sidebar when clicking outside on mobile
                document.addEventListener('click', (e) => {
                    if (window.innerWidth <= 768) {
                        if (!this.sidebar.contains(e.target) && !this.menuToggle.contains(e.target)) {
                            this.sidebar.classList.add('collapsed');
                        }
                    }
                });
            }

            setupChatSelection() {
                this.chatItems.forEach(item => {
                    item.addEventListener('click', () => {
                        const chatId = item.getAttribute('data-chat');
                        this.switchChat(chatId);
                        
                        // Close sidebar on mobile after selection
                        if (window.innerWidth <= 768) {
                            this.sidebar.classList.add('collapsed');
                        }
                    });
                });
            }

            switchChat(chatId) {
                if (chatId === this.currentChat) return;
                
                // Update active chat item
                this.chatItems.forEach(item => item.classList.remove('active'));
                document.querySelector(`[data-chat="${chatId}"]`).classList.add('active');
                
                // Update current chat
                this.currentChat = chatId;
                const chatInfo = this.chatData[chatId];
                
                // Update header
                this.currentChatAvatar.textContent = chatInfo.avatar;
                this.currentChatName.textContent = chatInfo.name;
                this.currentChatStatus.textContent = chatInfo.status;
                
                // Clear chat messages and add welcome message
                this.clearChat();
                this.addWelcomeMessage(chatId);
                
                // Reset message count for new chat
                this.messageCount = 1;
                this.updateMessageCount();
            }

            clearChat() {
                this.chatMessages.innerHTML = '';
            }

            addWelcomeMessage(chatId) {
                const welcomeMessages = {
                    ai: "Hello! I'm your AI assistant. How can I help you today?",
                    js: "Hey there! Ready to dive into some JavaScript coding?",
                    design: "Welcome! Let's create something beautiful together.",
                    support: "Hi! I'm here to help you with any technical issues.",
                    creative: "Hello, creative soul! What inspiring project shall we work on?"
                };
                
                this.addMessage(welcomeMessages[chatId] || welcomeMessages.ai, 'bot', true);
            }

            autoResizeTextarea() {
                this.messageInput.style.height = 'auto';
                this.messageInput.style.height = Math.min(this.messageInput.scrollHeight, 120) + 'px';
                
                // Enable/disable send button based on input
                const hasText = this.messageInput.value.trim().length > 0;
                this.sendButton.disabled = !hasText;
            }

            sendMessage() {
                const message = this.messageInput.value.trim();
                if (!message) return;

                this.addMessage(message, 'user');
                this.messageInput.value = '';
                this.autoResizeTextarea();
                this.messageCount++;
                this.updateMessageCount();

                // Show typing indicator and simulate bot response
                this.showTypingIndicator();
                const responseDelay = 800 + Math.random() * 1200;
                setTimeout(() => {
                    this.hideTypingIndicator();
                    this.addBotResponse();
                }, responseDelay);
            }

            addMessage(text, sender, isWelcome = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}`;
                
                const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                let statusHtml = '';
                if (sender === 'user') {
                    statusHtml = `
                        <div class="message-status">
                            <svg class="status-icon" viewBox="0 0 24 24">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                            </svg>
                            Sent
                        </div>
                    `;
                } else if (sender === 'bot' && !isWelcome) {
                    statusHtml = `
                        <div class="message-status">
                            <svg class="status-icon" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                            Delivered
                        </div>
                    `;
                }
                
                messageDiv.innerHTML = `
                    <div class="message-bubble">
                        ${text}
                        <div class="message-time">${time}</div>
                        ${statusHtml}
                    </div>
                `;
                
                this.chatMessages.appendChild(messageDiv);
                this.scrollToBottom();
                
                // Update status to delivered after a short delay for user messages
                if (sender === 'user') {
                    setTimeout(() => {
                        const statusDiv = messageDiv.querySelector('.message-status');
                        if (statusDiv) {
                            statusDiv.innerHTML = `
                                <svg class="status-icon" viewBox="0 0 24 24">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                </svg>
                                Delivered
                            `;
                        }
                    }, 1000);
                }
            }

            addBotResponse() {
                const chatInfo = this.chatData[this.currentChat];
                const responses = chatInfo.responses;
                const response = responses[Math.floor(Math.random() * responses.length)];
                this.addMessage(response, 'bot');
                this.messageCount++;
                this.updateMessageCount();
            }

            showTypingIndicator() {
                this.typingIndicator.style.display = 'flex';
                this.scrollToBottom();
            }

            hideTypingIndicator() {
                this.typingIndicator.style.display = 'none';
            }

            scrollToBottom() {
                setTimeout(() => {
                    this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
                }, 100);
            }

            toggleTheme() {
                this.isDarkMode = !this.isDarkMode;
                const theme = this.isDarkMode ? 'dark' : 'light';
                
                document.documentElement.setAttribute('data-theme', theme);
                this.themeToggle.textContent = this.isDarkMode ? '‚òÄÔ∏è' : 'üåô';
                this.currentThemeEl.textContent = this.isDarkMode ? 'Dark' : 'Light';
                
                // Save theme preference (with error handling for environments without localStorage)
                try {
                    localStorage.setItem('theme', theme);
                } catch (e) {
                    console.log('Theme persistence not available');
                }
            }

            toggleSidebar() {
                this.sidebar.classList.toggle('collapsed');
            }

            updateMessageCount() {
                this.messageCountEl.textContent = this.messageCount;
            }

            // Load saved theme
            loadTheme() {
                try {
                    const savedTheme = localStorage.getItem('theme');
                    if (savedTheme === 'dark') {
                        this.toggleTheme();
                    }
                } catch (e) {
                    // localStorage not available, use default theme
                    console.log('Theme persistence not available');
                }
            }
        }

        // Initialize the chat app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const chatApp = new ChatApp();
            chatApp.loadTheme();
        });

        // Handle window resize
        window.addEventListener('resize', () => {
            const sidebar = document.getElementById('sidebar');
            if (window.innerWidth > 768) {
                sidebar.classList.remove('collapsed');
            }
        });
    </script>
</body>
</html>